import{B as y,ay as E,j as _,k as b,l as S,b2 as F,C as g,aB as O}from"./index-DJZqXJCD.js";var j=y.extend({name:"focustrap-directive"}),P=E.extend({style:j});function m(n){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(n)}function h(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,o)}return t}function $(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?h(Object(t),!0).forEach(function(o){T(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}function T(n,e,t){return(e=w(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function w(n){var e=x(n,"string");return m(e)=="symbol"?e:e+""}function x(n,e){if(m(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var o=t.call(n,e||"default");if(m(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var H=P.extend("focustrap",{mounted:function(e,t){var o=t.value||{},r=o.disabled;r||(this.createHiddenFocusableElements(e,t),this.bind(e,t),this.autoElementFocus(e,t)),e.setAttribute("data-pd-focustrap",!0),this.$el=e},updated:function(e,t){var o=t.value||{},r=o.disabled;r&&this.unbind(e)},unmounted:function(e){this.unbind(e)},methods:{getComputedSelector:function(e){return':not(.p-hidden-focusable):not([data-p-hidden-focusable="true"])'.concat(e??"")},bind:function(e,t){var o=this,r=t.value||{},u=r.onFocusIn,i=r.onFocusOut;e.$_pfocustrap_mutationobserver=new MutationObserver(function(s){s.forEach(function(f){if(f.type==="childList"&&!e.contains(document.activeElement)){var l=function(a){var c=F(a)?F(a,o.getComputedSelector(e.$_pfocustrap_focusableselector))?a:b(e,o.getComputedSelector(e.$_pfocustrap_focusableselector)):b(a);return g(c)?c:a.nextSibling&&l(a.nextSibling)};_(l(f.nextSibling))}})}),e.$_pfocustrap_mutationobserver.disconnect(),e.$_pfocustrap_mutationobserver.observe(e,{childList:!0}),e.$_pfocustrap_focusinlistener=function(s){return u&&u(s)},e.$_pfocustrap_focusoutlistener=function(s){return i&&i(s)},e.addEventListener("focusin",e.$_pfocustrap_focusinlistener),e.addEventListener("focusout",e.$_pfocustrap_focusoutlistener)},unbind:function(e){e.$_pfocustrap_mutationobserver&&e.$_pfocustrap_mutationobserver.disconnect(),e.$_pfocustrap_focusinlistener&&e.removeEventListener("focusin",e.$_pfocustrap_focusinlistener)&&(e.$_pfocustrap_focusinlistener=null),e.$_pfocustrap_focusoutlistener&&e.removeEventListener("focusout",e.$_pfocustrap_focusoutlistener)&&(e.$_pfocustrap_focusoutlistener=null)},autoFocus:function(e){this.autoElementFocus(this.$el,{value:$($({},e),{},{autoFocus:!0})})},autoElementFocus:function(e,t){var o=t.value||{},r=o.autoFocusSelector,u=r===void 0?"":r,i=o.firstFocusableSelector,s=i===void 0?"":i,f=o.autoFocus,l=f===void 0?!1:f,d=b(e,"[autofocus]".concat(this.getComputedSelector(u)));l&&!d&&(d=b(e,this.getComputedSelector(s))),_(d)},onFirstHiddenElementFocus:function(e){var t,o=e.currentTarget,r=e.relatedTarget,u=r===o.$_pfocustrap_lasthiddenfocusableelement||!((t=this.$el)!==null&&t!==void 0&&t.contains(r))?b(o.parentElement,this.getComputedSelector(o.$_pfocustrap_focusableselector)):o.$_pfocustrap_lasthiddenfocusableelement;_(u)},onLastHiddenElementFocus:function(e){var t,o=e.currentTarget,r=e.relatedTarget,u=r===o.$_pfocustrap_firsthiddenfocusableelement||!((t=this.$el)!==null&&t!==void 0&&t.contains(r))?S(o.parentElement,this.getComputedSelector(o.$_pfocustrap_focusableselector)):o.$_pfocustrap_firsthiddenfocusableelement;_(u)},createHiddenFocusableElements:function(e,t){var o=this,r=t.value||{},u=r.tabIndex,i=u===void 0?0:u,s=r.firstFocusableSelector,f=s===void 0?"":s,l=r.lastFocusableSelector,d=l===void 0?"":l,a=function(v){return O("span",{class:"p-hidden-accessible p-hidden-focusable",tabIndex:i,role:"presentation","aria-hidden":!0,"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0,onFocus:v==null?void 0:v.bind(o)})},c=a(this.onFirstHiddenElementFocus),p=a(this.onLastHiddenElementFocus);c.$_pfocustrap_lasthiddenfocusableelement=p,c.$_pfocustrap_focusableselector=f,c.setAttribute("data-pc-section","firstfocusableelement"),p.$_pfocustrap_firsthiddenfocusableelement=c,p.$_pfocustrap_focusableselector=d,p.setAttribute("data-pc-section","lastfocusableelement"),e.prepend(c),e.append(p)}}});export{H as F};
